<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <record model="ir.ui.view" id="doctor_api_config_form_view">
        <field name="name">Doctor API Config Form</field>
        <field name="model">doctor.api.config</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button  string="Activate" name="btn_active" attrs="{'invisible': [('active', '=', True)]}" type="object" icon="fa-toggle-on fa-2x"/>
                    <button string="Deactivate" name="btn_deactive" attrs="{'invisible': [('active', '=', False)]}" type="object" icon="fa-toggle-off fa-2x"/>
                </header>

                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <!-- <button name="test_connection" type="object" class="oe_stat_button" icon="fa-pencil-square-o" string="Test Connection" invisible="1"/> -->
                        <button string="Fetch Details" name="get_doc_bill_details" attrs="{'invisible': [('active', '=', False)]}" type="object" icon="fa-toggle-off fa-2x" groups="base.group_no_one"/>
                    </div>
                    <div class="oe_title">
                        <h1>
                            <field name="name"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="url" attrs="{'required': [('active', '=', True)]}"/>
                            <field name="auth_key" attrs="{'required': [('active', '=', True)]}"/>
                            <field name="auth_date" attrs="{'required': [('active', '=', True)]}"/>
                            <field name="content_type" attrs="{'required': [('active', '=', True)]}"/>
                        </group>
                        <group>
                            <field name="bill_date" groups="base.group_no_one"/>
                            <field name="bill_location" attrs="{'required': [('active', '=', True)]}"/>
                            <field name="active" invisible="1"/>
                        </group>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="doctor_api_config_tree_view">
        <field name="name">Doctor API Configuration</field>
        <field name="model">doctor.api.config</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="auth_key"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="doctor_api_config_action">
        <field name="name">Doctor API Configuration</field>
        <field name="res_model">doctor.api.config</field>
        <field name="view_mode">tree,form</field>
    </record>



    <menuitem 
        id="doctor_api_config"
        name="Doctor API Configuration"
        parent="base.menu_administration"
        action="doctor_api_config_action"
        sequence="4"/>


    <record model="ir.ui.view" id="doctor_details_form_view">
        <field name="name">Doctor Details Form</field>
        <field name="model">doctor.details</field>
        <field name="arch" type="xml">
            <form>
                <header>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="doctor"/>
                            <field name="bill_ref"/>
                            <field name="name"/>
                            <field name="patient_name"/>
                            <field name="doc_fee"/>
                            <field name="doc_status"/>
                            <field name="doc_paid_date"/>
                        </group>
                        <group>
                            <field name="doa"/>
                            <field name="dod"/>
                            <field name="ins_provider_id"/>
                            <field name="ins_agreed_amount"/>
                            <field name="ins_actual_paid"/>
                            <field name="total_bill_amount"/>
                            <field name="total_sale_amount"/>
                            <field name="outstanding_amount"/>
                            <field name="reason"/>
                        </group>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="doctor_details_tree_view">
        <field name="name">Doctor Details Tree</field>
        <field name="model">doctor.details</field>
        <field name="arch" type="xml">
            <tree editable="top">
                <field name="name" invisible="1"/>
                <field name="api_date" readonly="1"/>
                <field name="bill_date" readonly="1"/>
                <field name="bill_ref" readonly="1"/>
                <field name="sale_order_id" readonly="1"/>
                <!-- <field name="invoice_ids" widget="many2many_tags"/> -->
                <field name="doctor" readonly="1"/>
                <field name="patient_name" readonly="1"/>
                <field name="doa" invisible="1" readonly="1"/>
                <field name="dod" invisible="1" readonly="1"/>
                <field name="doc_fee" readonly="1"/>
                <field name="doc_status" readonly="0"/>
                <field name="doc_paid_date" readonly="0" attrs="{'required': [('doc_status', '=','paid')]}"/>
                <field name="ins_provider_id" readonly="1"/>
                <field name="ins_agreed_amount" readonly="1"/>
                <field name="ins_actual_paid" readonly="1"/> 
                <field name="total_sale_amount" readonly="1"/>
                <field name="total_bill_amount" readonly="1"/>
                <field name="outstanding_amount" readonly="1"/>
                <field name="reason" readonly="1"/>
            </tree>
        </field>
    </record>

    <record id="view_doctor_details_search" model="ir.ui.view">
        <field name="name">Doctor Details Search</field>
        <field name="model">doctor.details</field>    
        <field name="arch" type="xml">
            <search>
                <field name="bill_ref"/>
                <field name="sale_order_id"/>
                <field name="doctor"/>
                <field name="patient_name"/>
                <field name="ins_provider_id" string="Insurance Provider"/>
                <field name="reason"/>
            </search>
        </field>
    </record>

    <record model="ir.actions.act_window" id="doctor_details_action">
        <field name="name">Doctor Details</field>
        <field name="res_model">doctor.details</field>
        <field name="view_mode">tree,pivot</field>
        <field name="context">{'create':False}</field>
        <!-- <field name="search_view_id" ref="view_printing_lccation_filter"/> -->
    </record>


    <menuitem 
        id="doctor_details"
        name="Doctor Details"
        parent="sale.sale_order_menu"
        action="doctor_details_action"
        sequence="3"/>

      <record id="model_update_bulk_sale_details" model="ir.actions.server">
        <field name="name">Update Bulk Sale Details</field>
        <field name="model_id" ref="model_doctor_details"/>
        <field name="binding_model_id" ref="model_doctor_details"/>
        <field name="binding_view_types">form,list</field>
        <field name="state">code</field>
        <field name="code">action = records.action_update_nielsen_image()</field>
    </record>

</odoo>
